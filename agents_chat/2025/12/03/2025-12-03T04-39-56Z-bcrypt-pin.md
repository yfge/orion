---
id: 2025-12-03T04-39-56Z-bcrypt-pin
date: 2025-12-03T04:39:56Z
participants: [human, orion-assistant]
models: [gpt-4o]
tags: [backend, dependencies, security]
related_paths:
  - backend/pyproject.toml
summary: "Pin bcrypt <4.1.0 to avoid passlib __about__ AttributeError"
---

## User original prompt and requirements
- 遇到错误：`AttributeError: module 'bcrypt' has no attribute '__about__'`，希望修复。

## Background and goals
- passlib 1.7.4 依赖 bcrypt 的 `__about__.__version__`，但 bcrypt 4.1+ 移除了该属性，导致启动报错。
- 目标：通过依赖约束避免拉取不兼容版本。

## Changes
- backend/pyproject.toml：将 bcrypt 依赖收紧为 `>=4.0.0,<4.1.0`，并注释说明原因。

## Outcome and impact
- 安装依赖时将使用 4.0.x，避免 passlib 触发 AttributeError；无需代码改动。

## Next steps (TODO)
- 如果后续升级 passlib，可放宽上限；当前需重新安装依赖或 `pip install "bcrypt<4.1.0"`。

## Linked commits/PRs
- 尚未提交 commit
